# Paltry文档

## 简介

学习过程中尝试写的一些小工具,包含了一些常用模块,应该算勉强能用,之后再逐渐改进

写这个文档主要是怕我自己以后长时间没看就看不懂之前写的是啥了(逃)

## 使用方法

Unity版本:2021.3.8f1c1 不过版本稍低一些应该也能用

将Package导入后,在场景中任意GameObject上挂载Paltry.MonoAgent脚本,便能正常使用了

某些模块依赖于其他模块,所以最好全部导入

有些模块使用前需要配置一些参数,在对每个模块的介绍中会提到

另外,每个类前面有一段使用方法的解释,这篇文档仅作简要介绍(其实就是懒)

## 模块介绍

### AudioMgr

*配置数据:音频采用AB包加载,需配置AB包包名,另外可以配置播放音效的音源组件初始缓存数*

*注意,使用AudioMgr播放前要在外部给Setting属性赋值,建议写在读取游戏配置文件处*

自动管理BGM和音效的缓存,并播放它们,Setting属性的值控制音频设置,可以直接对接UI面板的音频设置

有一个BGM淡入淡出的功能,可以用,但如果淡入淡出时调节音量会有bug,不建议用

## DebugTool

目前东西太少了,之后再写文档

## EventCenter

基于观察者模式的事件中心,可以订阅和移除事件,支持带一个参数的事件(多个参数?用值元组!)

事件名建议定义在EventName里,避免硬编码

## Extension

一些扩展方法,不过目前东西还很少,后续可能加一些特定情况提高集合操作性能的扩展方法

## InputMgr

*配置数据:输入检测的阈值,需要检测的键*

基于事件中心对按键检测统一管理,检测按键时直接订阅对应事件即可,另外,会自动检测双击和长按事件

在该类最下面预定义了一些按键事件,根据需求自行增减

## MonoAgent

**确保该脚本挂载在物体上**

管理Mono相关,不继承Mono的类可以在这里执行Update等方法,并且它负责确保在禁用域重载后

单例对象正常初始化(而不是保持先前状态)

## Pool

有两种Pool:GoPool用于GameObject,会自动把不同种类的GameObject分组,便于管理

Pool<T\>则是通用的对象池,能用于任何对象,只需提供相应的工厂方法和事件函数即可

对象池使用前需要Warm暖池,其实就是初始化,之后直接通过Get得到实例对象就能用了

## ResourcesLoad

*配置数据:AB包路径和主包包名*

目前只支持AB包加载,后续会添加Addressable

支持同步和异步加载AB包及资源文件,可以获取到异步加载AB包的进度及详细信息

## Singleton

支持C#单例(不继承Mono),Mono单例(继承Mono),ScriptableObject单例

## Storage

保存和加载数据到本地,目前仅支持Json,后续有更多保存方式以及自动生成保存数据类的扩展写好后再更新

## Timer

可以创建计时器,包括不受时间缩放影响的,用法和StopWatch差不多

还提供了延迟调用的静态方法

## Tweening

类似DoTween,根据给定动画曲线执行一个过程,有一些预定义的曲线

可以用Demo_VisualCurve查看曲线效果

## UIFramework

*配置数据:UIPanel中,配置面板淡入淡出的设置,UIMgr中,配置放UI的AB包包名*

 *以及,放UI的AB包里要有Canvas和EventSystem*

提供了便捷的打开/关闭面板方法,将UI面板按栈管理

会缓存加载过的UI资源,如果想进一步缓存,可设置面板的缓存策略为Open

也可以彻底清除面板,不常用,一般是内存很紧张时才用

自带UIPanel淡入淡出效果

目前只支持AB包形式的UI资源
